Dado o seguinte c√≥digo fonte, crie uma interface intuitiva para o usu√°rio em Streamlit para que o usu√°rio entra com o prompt e receba a sa√≠da desejada.
Se poss√≠vel, fa√ßa com que a sa√≠da seja formatada em um formato condizente com a linguagem pedida pelo usu√°rio. 
Crie-o em um arquivo separado, e use este arquivo chamado agentes.py como ponto de in√≠cio para o novo arquivo
Troque o input via arquivo por um pedido de prompt na interface. Use o c√≥digo passado como o arquivo agentes.py. N√ÉO CRIE UM ARQUIVO NOVO CHAMADO AGENTES.PY, 
USE O C√ìDIGO QUE FOI DADO COMO ELE.

C√≥digo:
#arquivo agentes.py, n√£o alterar
from google.adk.agents import LlmAgent
import textwrap
import os
import google.generativeai as genai 

# ---------------------------------------------------------
# CONFIGURA√á√ÉO
# ---------------------------------------------------------
os.environ["GOOGLE_API_KEY"] = ""
try:
    genai.configure(api_key=os.environ["GOOGLE_API_KEY"])
except Exception as e:
    print(f"Erro ao configurar o cliente Gemini: {e}")

# ---------------------------------------------------------
# INSTRU√á√ïES REFOR√áADAS
# ---------------------------------------------------------

instrucao_eng_software = textwrap.dedent("""\
    Voc√™ √© um engenheiro de software renomado. Sua tarefa √© receber o 'PEDIDO DO CLIENTE' (que pode conter um c√≥digo existente e/ou 
    uma nova funcionalidade) e transform√°-lo em uma especifica√ß√£o t√©cnica detalhada.

    1. **An√°lise do C√≥digo Base:** Revise o c√≥digo base fornecido.
       - Se o pedido for criar uma nova funcionalidade separada, como uma interface ou ferramenta (Ex: Streamlit)
       para um c√≥digo backend, categorize-o como **C√ìDIGO BASE N√ÉO APLIC√ÅVEL**.
       - Caso contr√°rio, categorize-o como **C√ìDIGO BASE APLIC√ÅVEL** (e ele deve ser modificado).
    2. **Foco:** A especifica√ß√£o deve ser *diretamente* sobre o desafio do cliente. Mantenha total fidelidade.

    Sua resposta deve ser dividida em duas se√ß√µes CLARAS:

    --- ESPECIFICACAO TECNICA ---
    [Defina fun√ß√µes, entradas, sa√≠das e requisitos da aplica√ß√£o. A prioridade m√°xima √© a tarefa principal solicitada.]

    --- CONTEXTO ORIGINAL DO CLIENTE ---
    [Defina: A) O PEDIDO ORIGINAL do cliente. B) O c√≥digo base fornecido. C) Uma nota: **C√ìDIGO BASE: [APLIC√ÅVEL/N√ÉO APLIC√ÅVEL]**]
    """)

instrucao_dev = textwrap.dedent("""\
    Voc√™ √© um DEV Senior. Voc√™ receber√° uma 'ESPECIFICACAO TECNICA' e o 'CONTEXTO ORIGINAL DO CLIENTE', que inclui uma 
    classifica√ß√£o sobre o c√≥digo base.

    1. **PRIORIDADE M√ÅXIMA:** Sua tarefa √© *unicamente* codificar a solu√ß√£o conforme a 'ESPECIFICACAO TECNICA'.
    2. **A√ß√£o no C√≥digo Base:**
       - Se a classifica√ß√£o for **C√ìDIGO BASE: N√ÉO APLIC√ÅVEL**, crie o c√≥digo do zero (como uma nova interface).
       - Se a classifica√ß√£o for **C√ìDIGO BASE: APLIC√ÅVEL**, voc√™ **DEVE** modificar o c√≥digo fornecido.
    3. **Qualidade:** Fa√ßa o c√≥digo em portugu√™s, seguindo boas pr√°ticas e PEP8. Gere apenas a vers√£o de produ√ß√£o.

    Sua resposta deve ser estruturada exatamente assim:

    --- CODIGO PYTHON ---
    [Cole o bloco de c√≥digo Python final, pronto para ser usado, que IMPLEMENTA A ESPECIFICA√á√ÉO.]

    --- CONTEXTO ORIGINAL DO CLIENTE ---
    [Cole o 'CONTEXTO ORIGINAL DO CLIENTE' exatamente como recebido do Engenheiro/Gerente.]
    """)

# Revisores e QA s√£o mantidos com pequenas altera√ß√µes para dar aten√ß√£o ao pedido
instrucao_revisor = textwrap.dedent("""\
    Voc√™ √© um revisor de c√≥digo. Analise erros de sintaxe e PEP8. Se atenha ao que o usu√°rio pediu, verificando se o c√≥digo atende o CONTEXTO ORIGINAL.
    - Se encontrar erros: Liste-os.
    - Se o c√≥digo estiver perfeito sintaticamente: Responda APENAS com a frase 'STATUS: APROVADO'.""")

instrucao_beta_tester = textwrap.dedent("""\
    Voc√™ √© um Beta Tester. Tente quebrar a l√≥gica do c√≥digo, focando na funcionalidade pedida no CONTEXTO ORIGINAL.
    - Se encontrar falhas ou bugs l√≥gicos: Descreva-os. 
    - Se a l√≥gica estiver s√≥lida: Responda APENAS com a frase 'STATUS: APROVADO'.""")

instrucao_controle_qualidade = textwrap.dedent("""\
    Voc√™ √© o QA (Controle de Qualidade). Avalie a experi√™ncia e requisitos, garantindo que o c√≥digo final atenda ao CONTEXTO ORIGINAL do cliente.
    - Se houver problemas de usabilidade ou requisitos n√£o atendidos: Liste-os.
    - Se estiver tudo excelente: Responda APENAS com a frase 'STATUS: APROVADO'.""")

instrucao_gerente_lancamento = textwrap.dedent("""\
    Voc√™ √© o Release Manager. Leia os relat√≥rios do Revisor, Beta Tester e QA.
    Regras R√≠gidas:
    1. Se E SOMENTE SE os tr√™s relat√≥rios contiverem a frase 'STATUS: APROVADO':
        Sua resposta deve ser EXATAMENTE: 'TERMINATE'.
    2. Caso contr√°rio (se houver qualquer erro):
        Consolide todos os feedbacks negativos em uma lista de tarefas CLARAS para o Dev. 
        **Voc√™ DEVE incluir o 'CONTEXTO ORIGINAL DO CLIENTE' (que est√° na sua entrada de trabalho) na sua resposta**, para que o Dev saiba qual c√≥digo corrigir e qual funcionalidade implementar/corrigir.
        N√ÉO gere c√≥digo. Apenas as instru√ß√µes de corre√ß√£o e o contexto original formatados como '--- CONTEXTO ORIGINAL DO CLIENTE --- [Conte√∫do]'.
    """)

# ---------------------------------------------------------
# AGENTES (Alterado para PRO para maior fidelidade)
# ---------------------------------------------------------

eng_software = LlmAgent(
    name="eng_software", 
    model="gemini-2.5-pro", 
    description="Decidir qual a melhor forma de desenvolver uma aplica√ß√£o", 
    instruction=instrucao_eng_software)

dev = LlmAgent(
    name="dev", 
    model="gemini-2.5-pro", 
    description="Codificar a aplica√ß√£o conforme instru√ß√£o do engenheiro de software", 
    instruction=instrucao_dev)

revisor = LlmAgent(
    name="Revisor", 
    model="gemini-2.5-pro", 
    description="Revisar erros no c√≥digo do desenvolvedor que impedem a compila√ß√£o do mesmo", 
    instruction=instrucao_revisor)

beta_tester = LlmAgent(
    name="beta_tester", 
    model="gemini-2.5-pro", 
    description="Testar o c√≥digo do desenvolvedor para procurar poss√≠veis bugs e mal funcionamento", 
    instruction=instrucao_beta_tester)

controle_qualidade = LlmAgent(
    name="controle_qualidade", 
    model="gemini-2.5-pro", 
    description="Garantir que o usu√°rio da aplica√ß√£o recebida tenha uma boa experi√™ncia com o seu produto", 
    instruction=instrucao_controle_qualidade)

gerente_lancamento = LlmAgent(
    name="gerente_lancamento", 
    model="gemini-2.5-pro", 
    description="Gerente que decide se o software vai para produ√ß√£o.", 
    instruction=instrucao_gerente_lancamento) 

# ---------------------------------------------------------
# FUN√á√ÉO DE EXECU√á√ÉO S√çNCRONA
# ---------------------------------------------------------

def executar_agente_sincronamente(agente, entrada):
    """
    Usa o SDK do Gemini diretamente para garantir uma chamada s√≠ncrona e retorna uma string pura.
    """
    prompt_completo = (
        f"Instru√ß√£o do Agente '{agente.name}' ({agente.description}): {agente.instruction}\n\n"
        f"ENTRADA DE TRABALHO: {entrada}"
    )

    client = genai.GenerativeModel(model_name=agente.model)
    
    try:
        response = client.generate_content(
            contents=prompt_completo,
            # Garantimos a estabilidade e determinismo na resposta
            generation_config={'temperature': 0.0} 
        )
        return response.text
    except Exception as e:
        return f"ERRO DE EXECU√á√ÉO DO LLM PARA {agente.name}: {e}"

# ---------------------------------------------------------
# EXECU√á√ÉO DO WORKFLOW COM PARSING DO CONTEXTO
# ---------------------------------------------------------

if __name__ == "__main__":
    print("\n--- Sistema Iniciado ---")
    
    NOME_ARQUIVO_PEDIDO = "Pedido.txt"
    try:
        with open(NOME_ARQUIVO_PEDIDO, "r", encoding="utf-8") as f:
            pedido_do_cliente = f.read()
        print(f"‚úÖ Pedido inicial lido de '{NOME_ARQUIVO_PEDIDO}'. Tamanho: {len(pedido_do_cliente)} caracteres.")
    except FileNotFoundError:
        print(f"üö® ERRO: O arquivo '{NOME_ARQUIVO_PEDIDO}' n√£o foi encontrado.")
        pedido_do_cliente = input(">> Digite o software que voc√™ quer criar: ")

    # 1. Engenheiro Gera a Spec
    print(f"\n[1] Engenheiro gerando especifica√ß√£o...")
    # A sa√≠da do engenheiro j√° cont√©m a especifica√ß√£o e o CONTEXTO ORIGINAL
    especificacao_e_contexto = executar_agente_sincronamente(eng_software, pedido_do_cliente)

    # Inicializa√ß√£o do loop
    entrada_atual = especificacao_e_contexto # A entrada para o DEV √© a sa√≠da do Engenheiro
    ultimo_codigo_valido = ""
    contexto_original_dev = "" # Vari√°vel para armazenar o contexto a ser repassado
    max_iteracoes = 30
    iteracao_atual = 0
    loop_terminado = False

    print("\n--- [2] Iniciando Loop de Desenvolvimento (Controle Manual) ---")

    while iteracao_atual < max_iteracoes and not loop_terminado:
        iteracao_atual += 1
        print(f"\nüîÑ ITERA√á√ÉO {iteracao_atual} de {max_iteracoes}")

        # A. Desenvolvedor trabalha (Cria ou Corrige)
        codigo_e_contexto = executar_agente_sincronamente(dev, entrada_atual)

        # üí• L√ìGICA DE PARSING PARA EXTRAIR C√ìDIGO E CONTEXTO üí•
        if "--- CONTEXTO ORIGINAL DO CLIENTE ---" in codigo_e_contexto:
            parts = codigo_e_contexto.split("--- CONTEXTO ORIGINAL DO CLIENTE ---", 1)
            
            # O c√≥digo √© a primeira parte, sem os marcadores
            codigo_gerado = parts[0].replace("--- CODIGO PYTHON ---", "").strip() 
            
            # O contexto √© a segunda parte, mantendo o marcador para ser repassado no feedback
            contexto_original_dev = "--- CONTEXTO ORIGINAL DO CLIENTE ---" + parts[1].strip()
        else:
            # Fallback se o DEV n√£o seguir o formato (assume-se que a sa√≠da √© apenas c√≥digo)
            codigo_gerado = codigo_e_contexto
            contexto_original_dev = ""
            print("   ‚ö†Ô∏è Aviso: DEV n√£o seguiu o formato de sa√≠da. Contexto original n√£o repassado.")
        
        ultimo_codigo_valido = codigo_gerado 
        print(f"   -> Dev gerou nova vers√£o do c√≥digo.")

        # B. Verificadores analisam o c√≥digo gerado
        print("   -> Rodando verificadores...")
        
        # Passamos o c√≥digo e o contexto original para os revisores
        analise_input = f"CONTEXTO ORIGINAL:\n{contexto_original_dev}\n\nAnalise o seguinte c√≥digo:\n{codigo_gerado}"
        
        analise_revisor = executar_agente_sincronamente(revisor, analise_input)
        analise_tester = executar_agente_sincronamente(beta_tester, analise_input)
        analise_qa = executar_agente_sincronamente(controle_qualidade, analise_input)

        # C. Compilando os relat√≥rios para o Gerente
        relatorio_completo = (
            f"Relat√≥rio Revisor: {analise_revisor}\n"
            f"Relat√≥rio Tester: {analise_tester}\n"
            f"Relat√≥rio QA: {analise_qa}"
        )
        
        # D. Gerente Decide
        # O Gerente recebe os relat√≥rios E o contexto original, para incluir no feedback, se for o caso.
        gerente_input = f"RELAT√ìRIOS DOS REVISORES:\n{relatorio_completo}\n\nCONTEXTO NECESS√ÅRIO PARA O FEEDBACK:\n{contexto_original_dev}"
        decisao = executar_agente_sincronamente(gerente_lancamento, gerente_input) 

        # E. L√≥gica de Parada
        if "TERMINATE" in decisao:
            print("   ‚úÖ GERENTE APROVOU! O loop ser√° encerrado.")
            loop_terminado = True
        else:
            print("   ‚ùå GERENTE REPROVOU. Feedback enviado ao Dev.")
            # O feedback do gerente (que inclui o contexto original) vira a entrada para o Dev na pr√≥xima volta
            entrada_atual = decisao

    # --- RESULTADO FINAL ---
    print(f"\n==============================================")
    if loop_terminado:
        print(f"SUCESSO! Projeto conclu√≠do em {iteracao_atual} itera√ß√µes.")
        print(f"==============================================\n")
        print(f"--- C√ìDIGO FINAL ---\n{ultimo_codigo_valido}")
    else:
        print(f"FALHA! O limite de {max_iteracoes} itera√ß√µes foi atingido sem consenso.")
        print(f"==============================================\n")

        print(f"--- √öLTIMA VERS√ÉO DO C√ìDIGO OU MENSAGEM DE ERRO ---\n{ultimo_codigo_valido}")
